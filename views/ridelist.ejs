<!DOCTYPE html>
<html>
  <head>
		<meta charset="utf-8">
		<meta http-equiv="X-UA-Compatible" content="IE=edge">
		<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
		<meta name="description" content="">
		<meta name="author" content="">

		<title>Meeple World</title>

		<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.7.1/css/all.css" integrity="sha384-fnmOCqbTlWIlj8LyTjo7mOUStjsKC4pOpQbqyi7RrhN7udi9RwhKkMHpvLbHG9Sr" crossorigin="anonymous">
		<link href="https://cdn.datatables.net/1.10.18/css/dataTables.bootstrap4.min.css" rel="stylesheet">

		<!-- Custom styles for this template-->
		<link href="stylesheets/index.css" rel="stylesheet">
  </head>
	<body id="page-top">
		<%- include navbar.ejs %>

		<div id="wrapper">
			<div id="content-wrapper">
				<div class="container-fluid">
					<div class="card mb-3">
						<div class="card-header">
							<i class="fas fa-dice"></i> &nbsp; All Rides
						</div>
						<div class="card-body">
							<div class="table-responsive">
								<table class="table table-bordered" id="dataTable" width="100%" cellspacing="0">
                  <thead>
                    <tr>
                      <th>Car</th>
                      <th>Max Passengers</th>
                      <th>Pickup Area</th>
                      <th>Pickup Time</th>
                      <th>Dropoff</th>
                      <th>Min Bid</th>
                      <th>Bid Start</th>
                      <th>Bid End</th>
                    </tr>
                  </thead>
                  <tbody>
                    <% for(var i=0; i<tbl.length; i++) { %>
                    <tr>
                      <td align="center"><%= tbl[i].car_plate_no %></td>
                      <td align="center"><%= tbl[i].max_passengers %></td>
                      <td align="center"> <%= tbl[i].pick_up_area %> </td>
                      <!-- <td align="center"> <%= tbl[i].pick_up_time %> -->
                      <td align="center"> <%= tbl[i].pick_up_time.toDateString() %> <br> <%= tbl[i].pick_up_time.toLocaleTimeString() %> </td>
                      <td align="center"><%= tbl[i].drop_off_area %></td>
                      <td align="center"><%= tbl[i].min_bid %></td>
                      <td align="center"><%= tbl[i].bid_start_time.toDateString() %> <br> <%= tbl[i].bid_start_time.toLocaleTimeString() %></td>
                      <td align="center">
                        <%= tbl[i].bid_end_time.toDateString() %> <br> <%= tbl[i].bid_end_time.toLocaleTimeString() %>
                        <% if(auth) { %>
                          <form action="/bid" style="display: inline;" method="get">
                            <button type="submit" style="display: inline;" class="btn btn-danger btn-sm float-right">Bid</button>
                          </form>
                        <% } else { %>
                          <form action="/login" style="display: inline;" method="get">
                            <button type="submit" style="display: inline;" class="btn btn-danger btn-sm float-right">Bid</button>
                          </form>
                        <% } %>

                      </td>
                    </tr>
                    <% } %>
                  </tbody>
								</table>
							</div>
						</div>
						<div class="card-footer small text-muted">CS2102 Database Project</div>
					</div>
				</div>
			</div>
		</div>

    <%- include partials/footer.ejs %>
		<%- include bottomscript.ejs %>
  </body>
</html>
